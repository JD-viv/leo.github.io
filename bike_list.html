<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Bikes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in {
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .fade-in.visible {
      opacity: 1;
      transform: none;
    }
  </style>
</head>
<body class="bg-black text-white font-sans">
  <!-- Navbar -->
  <nav class="flex justify-between items-center p-4 border-b border-gray-800 fade-in">
    <div class="text-xl font-bold">BikeTrack</div>
    <ul class="flex gap-6 text-sm">
      <li><a href="index.html" class="hover:text-gray-400">Dashboard</a></li>
      <li><a href="details.html" class="hover:text-gray-400">Add Bike</a></li>
      <li><a href="bike_list.html" class="hover:text-gray-400">View Bikes</a></li>
    </ul>
  </nav>

  <!-- Bike List Section -->
  <section class="max-w-5xl mx-auto py-12 px-6 fade-in">
      <h2 class="text-3xl font-bold mb-4 text-center">View Saved Bike</h2>
  <div class="space-y-4 bg-gray-900 p-6 rounded-xl shadow-xl">
    <label class="block mb-2 font-semibold">Select a Bike</label>
    <select id="bikeSelector" class="w-full p-3 rounded bg-gray-800 text-white">
      <option value="">-- Choose a bike --</option>
    </select>

    <div id="bikeDetails" class="mt-6 space-y-2 text-white hidden">
      <p><strong>Name:</strong> <span id="detailName"></span></p>
      <p><strong>Model Year:</strong> <span id="detailYear"></span></p>
      <p><strong>Description:</strong> <span id="detailDescription"></span></p>
      <p><strong>Last Service:</strong> <span id="detailLastService"></span></p>
      <p><strong>Next Service:</strong> <span id="detailNextService"></span></p>
    </div>
  </div>

    <h1 class="text-4xl font-bold mb-6 text-center">All Bike Details</h1>
    <div id="bikeList" class="space-y-6">
      <!-- Bike cards will be inserted here -->
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-sm text-gray-500 text-center py-8 border-t border-gray-800">
    Â© 2025 BikeTrack. All rights reserved.<br>
    <span class="block mt-2 text-white">Contact: +91 73394 59071 | vivekanandhan282@gmail.com</span>
  </footer>

  <script>
    // Fade-in animation on scroll
    function revealOnScroll() {
      document.querySelectorAll('.fade-in').forEach(function(el) {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight - 60) {
          el.classList.add('visible');
        }
      });
    }
    window.addEventListener('scroll', revealOnScroll);
    window.addEventListener('DOMContentLoaded', revealOnScroll);

    // Fetch bike names for selector
    fetch('http://localhost:3001/api/bikes')
      .then(res => res.json())
      .then(bikes => {
        const selector = document.getElementById('bikeSelector');
        bikes.forEach(bike => {
          const option = document.createElement('option');
          option.value = bike.name;
          option.textContent = bike.name;
          selector.appendChild(option);
        });
      });

    // Show details when a bike is selected
    document.getElementById('bikeSelector').addEventListener('change', function() {
      const name = this.value;
      if (!name) {
        document.getElementById('bikeDetails').classList.add('hidden');
        return;
      }
      fetch(`http://localhost:3001/api/bike/${encodeURIComponent(name)}`)
        .then(res => res.json())
        .then(bike => {
          document.getElementById('detailName').textContent = bike.name || '';
          document.getElementById('detailYear').textContent = bike.year || '';
          document.getElementById('detailDescription').textContent = bike.description || '';
          document.getElementById('detailLastService').textContent = bike.lastService || '';
          document.getElementById('detailNextService').textContent = bike.nextService || '';
          document.getElementById('bikeDetails').classList.remove('hidden');
        });
    });

    // Fetch and display all bikes
    fetch('http://localhost:3001/api/bikes')
      .then(res => res.json())
      .then(bikes => {
        const bikeList = document.getElementById("bikeList");
        if (bikes.length === 0) {
          bikeList.innerHTML = `<p class="text-gray-400 text-center">No bikes found. Add some from the <a href="details.html" class="text-blue-500 underline">Add Bike</a> page.</p>`;
        } else {
          bikes.forEach(bike => {
            fetch(`http://localhost:3001/api/bike/${encodeURIComponent(bike.name)}`)
              .then(res => res.json())
              .then(details => {
                const card = document.createElement("div");
                card.className = "bg-gray-900 p-6 rounded-xl shadow-xl";
                card.innerHTML = `
                  <h2 class="text-2xl font-semibold mb-2">${details.name}</h2>
                  <p><span class="font-bold text-white">Model Year:</span> ${details.year}</p>
                  <p><span class="font-bold text-white">Description:</span> ${details.description}</p>
                  <p><span class="font-bold text-white">Last Service:</span> ${details.lastService}</p>
                  <p><span class="font-bold text-white">Next Service:</span> ${details.nextService}</p>
                `;
                bikeList.appendChild(card);
              });
          });
        }
      });
  </script>
</body>
</html>
node server.js